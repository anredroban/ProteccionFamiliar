$(document).ready(function(){function e(e,t){$("#reportrange span").html(e.format("YYYY/MM/DD")+" - "+t.format("YYYY/MM/DD"))}e(moment().subtract(29,"days"),moment());$("#reportrange").daterangepicker({ranges:{Hoy:[moment(),moment()],Ayer:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Últimos 7 días":[moment().subtract(6,"days"),moment()],"Últimos 30 días":[moment().subtract(29,"days"),moment()],"Esta semana":[moment().startOf("week").add(1,"days"),moment().endOf("week").add(1,"days")],"Este mes":[moment().startOf("month"),moment().endOf("month")],"Mes Anterior":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},locale:{format:"YYYY/MM/DD",separator:" - ",applyLabel:"Aplicar",cancelLabel:"Cancelar",customRangeLabel:"Elegir Rango",daysOfWeek:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],firstDay:1}},e);$("#btnreporteestados").click(function(){var e=$("#reportrange").val().split("-");var t=e[0].replace("/","-").trim().replace("/","-")+" 00:00:00";var n=e[1].replace("/","-").trim().replace("/","-")+" 23:59:59";var r=$("#nombrebase").val();var i=$("#usuario").val();$.get("/CallCenter/funcionesAjax/getGraficoEstadosReporte",{fechaInicio:t,fechaFin:n,nombreBase:r,usuario:i},function(e){var t=new Array;var n=new Array;var r=0;var i=0;if(e["Contactado"]||e["NoContactado"]){var s=0;var o=0;for(var u in e["DetalleContactados"]){t[r]=[u,e["DetalleContactados"][u]];r++}for(var u in e["DetalleNoContactados"]){n[i]=[u,e["DetalleNoContactados"][u]];i++}if(e["Contactado"]){s=e["Contactado"]}if(e["NoContactado"]){o=e["NoContactado"]}$("#container").highcharts({chart:{type:"pie"},title:{text:"Contactados VS No Contactados"},subtitle:{text:"Click en un area del pie para ver detalles"},plotOptions:{series:{dataLabels:{enabled:true,format:"{point.name}: {point.y:.0f}"}}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.0f}</b><br/>'},series:[{name:"Brands",colorByPoint:true,data:[{name:"Contactados",y:s,drilldown:"Contactados"},{name:"No Contactados",y:o,drilldown:"No Contactados"}]}],drilldown:{series:[{name:"Contactados",id:"Contactados",data:t},{name:"No Contactados",id:"No Contactados",data:n}]}})}else{$("#container").html("<div class='col-lg-12' style='text-align: center; color: red; margin-top: 100px'><h5>No Hay Datos para Graficar</h5></div>")}})})})
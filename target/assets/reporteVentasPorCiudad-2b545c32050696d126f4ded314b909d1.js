$(document).ready(function(){function e(e,t){$("#reportrange span").html(e.format("YYYY/MM/DD")+" - "+t.format("YYYY/MM/DD"))}e(moment().subtract(29,"days"),moment());$("#reportrange").daterangepicker({ranges:{Hoy:[moment(),moment()],Ayer:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Últimos 7 días":[moment().subtract(6,"days"),moment()],"Últimos 30 días":[moment().subtract(29,"days"),moment()],"Esta semana":[moment().startOf("week").add(1,"days"),moment().endOf("week").add(1,"days")],"Este mes":[moment().startOf("month"),moment().endOf("month")],"Mes Anterior":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},locale:{format:"YYYY/MM/DD",separator:" - ",applyLabel:"Aplicar",cancelLabel:"Cancelar",customRangeLabel:"Elegir Rango",daysOfWeek:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],firstDay:1}},e);$("#btnreporteventasporciudad").click(function(){var e=$("#reportrange").val().split("-");var t=e[0].replace("/","-").trim().replace("/","-")+" 00:00:00";var n=e[1].replace("/","-").trim().replace("/","-")+" 23:59:59";var r=$("#nombrebase").val();var i=$("#usuario").val();$.get("/CallCenter/funcionesAjax/getGraficoVentasCiudadReporte",{fechaInicio:t,fechaFin:n,nombreBase:r,usuario:i},function(e){if(Object.keys(e).length>0){var t=new Array;var n=new Array;t[0]="Quito";if(e["QUITO"])t[1]=e["QUITO"];else t[1]=0;n[0]="Guayaquil";if(e["GUAYAQUIL"])n[1]=e["GUAYAQUIL"];else n[1]=0;$("#container").highcharts({chart:{plotBackgroundColor:null,plotBorderWidth:0,plotShadow:false},title:{text:"Ventas<br>por<br>Ciudad",align:"center",verticalAlign:"middle",y:40},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{dataLabels:{enabled:true,distance:-50,style:{fontWeight:"bold",color:"white",textShadow:"0px 1px 2px black"}},startAngle:-90,endAngle:90,center:["50%","75%"]}},series:[{type:"pie",name:"Ventas por Ciudad",innerSize:"50%",data:[t,n]}]});$("#containertabla").html("<table class='table'><thead><tr><th>Ciudad</th><th>Cantidad</th></tr></thead><tbody><tr><td>Quito</td><td>"+t[1]+"</td></tr><tr><td>Guayaquil</td><td>"+n[1]+"</td></tr></tbody></table>")}else{$("#container").html("<div class='col-lg-12' style='text-align: center; color: red; margin-top: 100px'><h5>No Hay Datos para Graficar</h5></div>")}})})})
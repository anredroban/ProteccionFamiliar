(function(e){"object"===typeof module&&module.exports?(e["default"]=e,module.exports=e):"function"===typeof define&&define.amd?define("highcharts/modules/drilldown",["highcharts"],function(t){e(t);e.Highcharts=t;return e}):e("undefined"!==typeof Highcharts?Highcharts:void 0)})(function(e){function t(e,t,n,r){e.hasOwnProperty(t)||(e[t]=r.apply(null,n))}e=e?e._modules:{};t(e,"modules/drilldown.src.js",[e["parts/Globals.js"],e["parts/Utilities.js"]],function(e,t){var n=t.objectEach,r=e.animObject,i=e.noop,s=e.color;t=e.defaultOptions;var o=e.extend,u=e.format,a=e.pick,f=e.Chart,l=e.seriesTypes,c=l.pie;l=l.column;var h=e.Tick,p=e.fireEvent,d=1;o(t.lang,{drillUpText:"‚óÅ Back to {series.name}"});t.drilldown={activeAxisLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},activeDataLabelStyle:{cursor:"pointer",color:"#003399",fontWeight:"bold",textDecoration:"underline"},animation:{duration:500},drillUpButton:{position:{align:"right",x:-10,y:10}}};e.SVGRenderer.prototype.Element.prototype.fadeIn=function(e){this.attr({opacity:.1,visibility:"inherit"}).animate({opacity:a(this.newOpacity,1)},e||{duration:250})};f.prototype.addSeriesAsDrilldown=function(e,t){this.addSingleSeriesAsDrilldown(e,t);this.applyDrilldown()};f.prototype.addSingleSeriesAsDrilldown=function(t,n){var r=t.series,u=r.xAxis,f=r.yAxis,l=[],c=[],h;var p=this.styledMode?{colorIndex:a(t.colorIndex,r.colorIndex)}:{color:t.color||r.color};this.drilldownLevels||(this.drilldownLevels=[]);var v=r.options._levelNumber||0;(h=this.drilldownLevels[this.drilldownLevels.length-1])&&h.levelNumber!==v&&(h=void 0);n=o(o({_ddSeriesId:d++},p),n);var m=r.points.indexOf(t);r.chart.series.forEach(function(t){t.xAxis!==u||t.isDrilling||(t.options._ddSeriesId=t.options._ddSeriesId||d++,t.options._colorIndex=t.userOptions._colorIndex,t.options._levelNumber=t.options._levelNumber||v,h?(l=h.levelSeries,c=h.levelSeriesOptions):(l.push(t),t.purgedOptions=e.merge({_ddSeriesId:t.options._ddSeriesId,_levelNumber:t.options._levelNumber,selected:t.options.selected},t.userOptions),c.push(t.purgedOptions)))});t=o({levelNumber:v,seriesOptions:r.options,seriesPurgedOptions:r.purgedOptions,levelSeriesOptions:c,levelSeries:l,shapeArgs:t.shapeArgs,bBox:t.graphic?t.graphic.getBBox():{},color:t.isNull?(new e.Color(s)).setOpacity(0).get():s,lowerSeriesOptions:n,pointOptions:r.options.data[m],pointIndex:m,oldExtremes:{xMin:u&&u.userMin,xMax:u&&u.userMax,yMin:f&&f.userMin,yMax:f&&f.userMax},resetZoomButton:this.resetZoomButton},p);this.drilldownLevels.push(t);u&&u.names&&(u.names.length=0);n=t.lowerSeries=this.addSeries(n,!1);n.options._levelNumber=v+1;u&&(u.oldPos=u.pos,u.userMin=u.userMax=null,f.userMin=f.userMax=null);r.type===n.type&&(n.animate=n.animateDrilldown||i,n.options.animation=!0)};f.prototype.applyDrilldown=function(){var e=this.drilldownLevels;if(e&&0<e.length){var t=e[e.length-1].levelNumber;this.drilldownLevels.forEach(function(e){e.levelNumber===t&&e.levelSeries.forEach(function(e){e.options&&e.options._levelNumber===t&&e.remove(!1)})})}this.resetZoomButton&&(this.resetZoomButton.hide(),delete this.resetZoomButton);this.pointer.reset();this.redraw();this.showDrillUpButton();p(this,"afterDrilldown")};f.prototype.getDrilldownBackText=function(){var e=this.drilldownLevels;if(e&&0<e.length)return e=e[e.length-1],e.series=e.seriesOptions,u(this.options.lang.drillUpText,e)};f.prototype.showDrillUpButton=function(){var e=this,t=this.getDrilldownBackText(),n=e.options.drilldown.drillUpButton,r;if(this.drillUpButton)this.drillUpButton.attr({text:t}).align();else{var i=(r=n.theme)&&r.states;this.drillUpButton=this.renderer.button(t,null,null,function(){e.drillUp()},r,i&&i.hover,i&&i.select).addClass("highcharts-drillup-button").attr({align:n.position.align,zIndex:7}).add().align(n.position,!1,n.relativeTo||"plotBox")}};f.prototype.drillUp=function(){if(this.drilldownLevels&&0!==this.drilldownLevels.length){for(var e=this,t=e.drilldownLevels,n=t[t.length-1].levelNumber,r=t.length,i=e.series,s,o,u,a,f=function(t){i.forEach(function(e){e.options._ddSeriesId===t._ddSeriesId&&(n=e)});var n=n||e.addSeries(t,!1);n.type===u.type&&n.animateDrillupTo&&(n.animate=n.animateDrillupTo);t===o.seriesPurgedOptions&&(a=n)};r--;)if(o=t[r],o.levelNumber===n){t.pop();u=o.lowerSeries;if(!u.chart)for(s=i.length;s--;)if(i[s].options.id===o.lowerSeriesOptions.id&&i[s].options._levelNumber===n+1){u=i[s];break}u.xData=[];o.levelSeriesOptions.forEach(f);p(e,"drillup",{seriesOptions:o.seriesOptions});a.type===u.type&&(a.drilldownLevel=o,a.options.animation=e.options.drilldown.animation,u.animateDrillupFrom&&u.chart&&u.animateDrillupFrom(o));a.options._levelNumber=n;u.remove(!1);a.xAxis&&(s=o.oldExtremes,a.xAxis.setExtremes(s.xMin,s.xMax,!1),a.yAxis.setExtremes(s.yMin,s.yMax,!1));o.resetZoomButton&&(e.resetZoomButton=o.resetZoomButton,e.resetZoomButton.show())}this.redraw();0===this.drilldownLevels.length?this.drillUpButton=this.drillUpButton.destroy():this.drillUpButton.attr({text:this.getDrilldownBackText()}).align();this.ddDupes.length=[];p(e,"drillupall")}};f.prototype.callbacks.push(function(){var t=this;t.drilldown={update:function(n,r){e.merge(!0,t.options.drilldown,n);a(r,!0)&&t.redraw()}}});e.addEvent(f,"beforeShowResetZoom",function(){if(this.drillUpButton)return!1});e.addEvent(f,"render",function(){(this.xAxis||[]).forEach(function(e){e.ddPoints={};e.series.forEach(function(t){var n,r=t.xData||[],i=t.points;for(n=0;n<r.length;n++){var s=t.options.data[n];"number"!==typeof s&&(s=t.pointClass.prototype.optionsToObject.call({series:t},s),s.drilldown&&(e.ddPoints[r[n]]||(e.ddPoints[r[n]]=[]),e.ddPoints[r[n]].push(i?i[n]:!0)))}});n(e.ticks,h.prototype.drillable)})});l.prototype.animateDrillupTo=function(t){if(!t){var n=this,r=n.drilldownLevel;this.points.forEach(function(e){var t=e.dataLabel;e.graphic&&e.graphic.hide();t&&(t.hidden="hidden"===t.attr("visibility"),t.hidden||(t.hide(),e.connector&&e.connector.hide()))});e.syncTimeout(function(){n.points&&n.points.forEach(function(e,t){t=t===(r&&r.pointIndex)?"show":"fadeIn";var n="show"===t?!0:void 0,i=e.dataLabel;if(e.graphic)e.graphic[t](n);i&&!i.hidden&&(i.fadeIn(),e.connector&&e.connector.fadeIn())})},Math.max(this.chart.options.drilldown.animation.duration-50,0));this.animate=i}};l.prototype.animateDrilldown=function(e){var t=this,n=this.chart,i=n.drilldownLevels,s,u=r(n.options.drilldown.animation),f=this.xAxis,l=n.styledMode;e||(i.forEach(function(e){t.options._ddSeriesId===e.lowerSeriesOptions._ddSeriesId&&(s=e.shapeArgs,l||(s.fill=e.color))}),s.x+=a(f.oldPos,f.pos)-f.pos,this.points.forEach(function(e){var n=e.shapeArgs;l||(n.fill=e.color);e.graphic&&e.graphic.attr(s).animate(o(e.shapeArgs,{fill:e.color||t.color}),u);e.dataLabel&&e.dataLabel.fadeIn(u)}),this.animate=null)};l.prototype.animateDrillupFrom=function(t){var n=r(this.chart.options.drilldown.animation),i=this.group,s=i!==this.chart.columnGroup,o=this;o.trackerGroups.forEach(function(e){if(o[e])o[e].on("mouseover")});s&&delete this.group;this.points.forEach(function(r){var u=r.graphic,a=t.shapeArgs,f=function(){u.destroy();i&&s&&(i=i.destroy())};u&&(delete r.graphic,o.chart.styledMode||(a.fill=t.color),n.duration?u.animate(a,e.merge(n,{complete:f})):(u.attr(a),f()))})};c&&o(c.prototype,{animateDrillupTo:l.prototype.animateDrillupTo,animateDrillupFrom:l.prototype.animateDrillupFrom,animateDrilldown:function(t){var n=this.chart.drilldownLevels[this.chart.drilldownLevels.length-1],r=this.chart.options.drilldown.animation,i=n.shapeArgs,s=i.start,o=(i.end-s)/this.points.length,u=this.chart.styledMode;t||(this.points.forEach(function(t,a){var f=t.shapeArgs;u||(i.fill=n.color,f.fill=t.color);if(t.graphic)t.graphic.attr(e.merge(i,{start:s+a*o,end:s+(a+1)*o}))[r?"animate":"attr"](f,r)}),this.animate=null)}});e.Point.prototype.doDrilldown=function(e,t,n){var r=this.series.chart,i=r.options.drilldown,s=(i.series||[]).length;r.ddDupes||(r.ddDupes=[]);for(;s--&&!o;)if(i.series[s].id===this.drilldown&&-1===r.ddDupes.indexOf(this.drilldown)){var o=i.series[s];r.ddDupes.push(this.drilldown)}p(r,"drilldown",{point:this,seriesOptions:o,category:t,originalEvent:n,points:void 0!==t&&this.series.xAxis.getDDPoints(t).slice(0)},function(t){var n=t.point.series&&t.point.series.chart,r=t.seriesOptions;n&&r&&(e?n.addSingleSeriesAsDrilldown(t.point,r):n.addSeriesAsDrilldown(t.point,r))})};e.Axis.prototype.drilldownCategory=function(e,t){n(this.getDDPoints(e),function(n){n&&n.series&&n.series.visible&&n.doDrilldown&&n.doDrilldown(!0,e,t)});this.chart.applyDrilldown()};e.Axis.prototype.getDDPoints=function(e){return this.ddPoints&&this.ddPoints[e]};h.prototype.drillable=function(){var t=this.pos,n=this.label,r=this.axis,i="xAxis"===r.coll&&r.getDDPoints,s=i&&r.getDDPoints(t),o=r.chart.styledMode;i&&(n&&s&&s.length?(n.drillable=!0,n.basicStyles||o||(n.basicStyles=e.merge(n.styles)),n.addClass("highcharts-drilldown-axis-label").on("click",function(e){r.drilldownCategory(t,e)}),o||n.css(r.chart.options.drilldown.activeAxisLabelStyle)):n&&n.drillable&&(o||(n.styles={},n.css(n.basicStyles)),n.on("click",null),n.removeClass("highcharts-drilldown-axis-label")))};e.addEvent(e.Point,"afterInit",function(){var t=this,n=t.series;t.drilldown&&e.addEvent(t,"click",function(e){n.xAxis&&!1===n.chart.options.drilldown.allowPointDrilldown?n.xAxis.drilldownCategory(t.x,e):t.doDrilldown(void 0,void 0,e)});return t});e.addEvent(e.Series,"afterDrawDataLabels",function(){var e=this.chart.options.drilldown.activeDataLabelStyle,t=this.chart.renderer,n=this.chart.styledMode;this.points.forEach(function(r){var i=r.options.dataLabels,s=a(r.dlOptions,i&&i.style,{});r.drilldown&&r.dataLabel&&("contrast"!==e.color||n||(s.color=t.getContrast(r.color||this.color)),i&&i.color&&(s.color=i.color),r.dataLabel.addClass("highcharts-drilldown-data-label"),n||r.dataLabel.css(e).css(s))},this)});var v=function(e,t,n,r){e[n?"addClass":"removeClass"]("highcharts-drilldown-point");r||e.css({cursor:t})};e.addEvent(e.Series,"afterDrawTracker",function(){var e=this.chart.styledMode;this.points.forEach(function(t){t.drilldown&&t.graphic&&v(t.graphic,"pointer",!0,e)})});e.addEvent(e.Point,"afterSetState",function(){var e=this.series.chart.styledMode;this.drilldown&&this.series.halo&&"hover"===this.state?v(this.series.halo,"pointer",!0,e):this.series.halo&&v(this.series.halo,"auto",!1,e)})});t(e,"masters/modules/drilldown.src.js",[],function(){})})